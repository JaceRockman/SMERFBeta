{"version":3,"sources":["entities/creatures/views/main.cljs"],"mappings":"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","names":["entities.creatures.views.main/creature-select","conn","creatures","flex-vals","G__39850","G__39851","organisms.library/search-filter-sort-list","creature-data","js/shadow.js.shim.module$react_native.Pressable","G__39852","G__39853","entities.creatures.data.interface/set-active-creature","G__39854","G__39855","organisms.library/default-text","cljs.core.nth","G__39856","G__39857","organisms.environments.modals/example-new-item-modal","entities.creatures.views.main/ruleset-select-modal","temp__5802__auto__","active-campaign-rulesets","entities.campaigns.data.interface/get-active-campaign-rulesets","js/shadow.js.shim.module$react_native.View","cljs.core.doall","cljs.core.map","ruleset","G__39858","G__39859","entities.campaigns.data.interface/set-campaign-active-ruleset","cljs.core/reset!","organisms.library/modal-content","G__39860","entities.creatures.views.main/creature-info","creature-details","portrait","gender","races","cljs.core.apply","cljs.core/str","cljs.core.interpose","entities.creatures.data.interface/get-creature-races","description","organisms.config/screen-width","js/shadow.js.shim.module$react_native.Image","js/require","js/shadow.js.shim.module$$expo$vector_icons.FontAwesome5","cljs.core/deref","organisms.config/palette","entities.creatures.views.main/creature","G__39861","G__39862","G__39863","organisms.library/indicated-scroll-view","organisms.library/creature-horizontal-position","entities.creatures.views.stats/stats","entities.creatures.data.interface/get-creature-domains","entities.creatures.views.resources/resources","entities.creatures.views.actions/actions","entities.creatures.data.interface/get-creature-resource-resources","entities.creatures.views.notes/notes","entities.creatures.views.main/creatures-page","props","organisms.library/view-frame","active-campaign-data","entities.campaigns.data.interface/get-active-campaign","active-creature-data","entities.creatures.data.interface/get-active-creature","entities.campaigns.data.interface/get-active-campaign-creatures","entities.creatures.data.interface/get-all-creatures"],"sourcesContent":["(ns entities.creatures.views.main\r\n  (:require [reagent.core :as r]\r\n            [\"react-native\" :as rn]\r\n            [\"@expo/vector-icons\" :refer [FontAwesome5]]\r\n            [organisms.config :as config]\r\n            [organisms.library :as components]\r\n            [entities.campaigns.data.interface :as campaign-data]\r\n            [entities.creatures.data.interface :as creature-data]\r\n            [entities.creatures.views.stats :as creature-stats-view]\r\n            [entities.creatures.views.resources :as creature-resources-view]\r\n            [entities.creatures.views.actions :as creature-actions-view]\r\n            [entities.creatures.views.notes :as creature-notes-view]\r\n            [organisms.environments.modals :as modals]))\r\n\r\n(defn creature-select\r\n  [conn creatures]\r\n  (let [flex-vals [1 1]]\r\n    (components/search-filter-sort-list\r\n     {:items creatures\r\n      :column-headers [\"Name\" \"Creator\"]\r\n      :column-flex-vals flex-vals\r\n      :item-format-fn (fn [creature-data]\r\n                        [:> rn/Pressable {:style {:flex-direction :row}\r\n                                          :on-press (fn []\r\n                                                      (creature-data/set-active-creature\r\n                                                       conn\r\n                                                       (:id creature-data)))}\r\n                         (components/default-text (:title creature-data)\r\n                                                  {:flex (nth flex-vals 0)})\r\n                         (components/default-text \"Avis Industries\"\r\n                                                  {:flex (nth flex-vals 1)})])\r\n      :add-item-fn organisms.environments.modals/example-new-item-modal}\r\n     \"creatures\")))\r\n\r\n(defn ruleset-select-modal\r\n  [conn]\r\n  (if-let [active-campaign-rulesets (campaign-data/get-active-campaign-rulesets conn)]\r\n    [:> rn/View {:style {:height \"100%\"}}\r\n     (doall (map (fn [ruleset]\r\n                   [:> rn/Pressable {:on-press (fn []\r\n                                                 (campaign-data/set-campaign-active-ruleset conn (:db/id ruleset))\r\n                                                 (reset! components/modal-content nil))}\r\n                    (components/default-text (:title ruleset))]) active-campaign-rulesets))]\r\n    [:> rn/View {:style {:height \"100%\"}}\r\n     (components/default-text \"No rulesets found in active campaign\")]))\r\n\r\n(defn creature-info [conn creature-details]\r\n  (let [portrait (:creature/portrait creature-details)\r\n        gender (:creature/gender creature-details)\r\n        races (str \"Races: \" (apply str (interpose \" \" (creature-data/get-creature-races conn creature-details))))\r\n        description (:creature/description creature-details)]\r\n    [:> rn/View {:style {:width (config/screen-width) :flex-direction :row :align-items :center :height \"15%\"}}\r\n     [:> rn/Image {:style {:width \"25%\" :max-height \"100%\" :aspect-ratio 1}\r\n                   :source (if portrait\r\n                             {:uri portrait}\r\n                             (js/require \"../assets/character silhouette.png\"))}]\r\n     [:> rn/View {:style {:flex 1}}\r\n      (components/default-text gender)\r\n      (components/default-text races)\r\n      (components/default-text description)]\r\n     [:> rn/View {:style {:position :absolute :top 10 :right 10}}\r\n      [:> rn/Pressable {:on-press #(reset! components/modal-content\r\n                                          {:display? true :fn ruleset-select-modal :args [conn]})}\r\n       [:> FontAwesome5 {:name :book :color (:surface-700 @config/palette) :size 20}]]]]))\r\n\r\n(defn creature [conn creature-data]\r\n  [:> rn/View {:style {:height \"100%\"}}\r\n   (creature-info conn creature-data)\r\n   (components/indicated-scroll-view\r\n    components/creature-horizontal-position\r\n    [\"Stats\" \"Resources\" \"Actions\" \"Notes\"]\r\n    [(creature-stats-view/stats conn (creature-data/get-creature-domains conn creature-data) {})\r\n     (creature-resources-view/resources conn creature-data)\r\n     (creature-actions-view/actions conn creature-data\r\n                                    (creature-data/get-creature-domains conn creature-data)\r\n                                    (creature-data/get-creature-resource-resources conn creature-data))\r\n     (creature-notes-view/notes conn creature-data)])])\r\n\r\n(defn creatures-page [conn ^js props]\r\n  (components/view-frame\r\n   conn\r\n   (let [active-campaign-data (campaign-data/get-active-campaign conn)\r\n         active-creature-data (creature-data/get-active-creature conn)]\r\n     (cond\r\n       active-creature-data (creature conn active-creature-data)\r\n       active-campaign-data (creature-select conn (campaign-data/get-active-campaign-creatures conn))\r\n       :else (creature-select conn (creature-data/get-all-creatures conn))))\r\n   \"creatures-page\"))\r\n"]}