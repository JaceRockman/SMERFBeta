{"version":3,"sources":["entities/resources/data/core.cljc"],"mappings":"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","names":["entities.resources.data.core/resource-properties","entities.resources.data.core/example-resources","example-actions","cljs.core.concat","entities.resources.data.core/get-all-resources","conn","resource-ids","cljs.core.map","cljs.core/first","G__39140","G__39141","cljs.core/deref","datascript.core/q","G__39143","G__39144","G__39145","datascript.core/pull-many","entities.resources.data.core/get-all-resource-properties","G__39152","G__39153","G__39154","G__39158","G__39159","entities.resources.data.core/get-resources-by-id","G__39179","G__39180","G__39181","entities.resources.data.core/get-resource-by-id","resource-id","G__39190","G__39191","G__39192","datascript.core/pull","entities.resources.data.core/get-resource-actions","cljs.core.println","result","G__39195","G__39196","G__39197","G__39198","G__39199","G__39200","entities.resources.data.core/create-resource","resource-data","datascript.core.transact_BANG_","entities.resources.data.core/fffirst","x","entities.resources.data.core/get-creature-resource","creature-resource-id","G__39206","G__39207","datascript.core/entity","entities.resources.data.core/get-creature-resource-quantity","creature-id","cljs.core/ffirst","G__39212","G__39213","G__39214","G__39215","entities.resources.data.core/get-resource-from-creature-resource","G__39220","G__39221","G__39222","entities.resources.data.core/get-quantity-from-creature-resource","G__39223","G__39224","G__39225","entities.resources.data.core/update-creature-resource-quantity","update-fn","current-quantity","G__39226","G__39227","G__39228","new-quantity","entities.resources.data.core/add-creature-resource"],"sourcesContent":["(ns entities.resources.data.core\r\n  (:require [datascript.core :as ds]))\r\n\r\n(def resource-properties [{:db/ident :resource-property/light}\r\n                          {:db/ident :resource-property/medium}\r\n                          {:db/ident :resource-property/heavy}])\r\n\r\n(defn example-resources\r\n  [example-actions]\r\n  [{:resource-property/title \"light\"\r\n    :db/ident :resource-property/light\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"medium\"\r\n    :db/ident :resource-property/medium\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"heavy\"\r\n    :db/ident :resource-property/heavy\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"virtue\"\r\n    :db/ident :resource-property/virtue\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"ideal\"\r\n    :db/ident :resource-property/ideal\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"vice\"\r\n    :db/ident :resource-property/vice\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"goal\"\r\n    :db/ident :resource-property/goal\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"virtue\"\r\n    :db/ident :resource-property/virtue\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"training\"\r\n    :db/ident :resource-property/training\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"reputation\"\r\n    :db/ident :resource-property/reputation\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"membership\"\r\n    :db/ident :resource-property/membership\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"friend\"\r\n    :db/ident :resource-property/friend\r\n    :entity-type \"resource-property\"}\r\n   {:resource-property/title \"rival\"\r\n    :db/ident :resource-property/rival\r\n    :entity-type \"resource-property\"}\r\n   {:title                  \"Longsword\"\r\n    :entity-type            \"resource\"\r\n    :resource/type          \"Equipment\"\r\n    :resource/properties    [:resource-property/medium]\r\n    :resource/actions       (concat example-actions example-actions example-actions)\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value \"2\"\r\n    :resource/power-title   \"Power\"\r\n    :resource/power-value   \"2\"\r\n    :resource/flavor-text   \"A standard longsword used in battle.\"}\r\n\r\n   {:title                  \"Leather Armor\"\r\n    :entity-type            \"resource\"\r\n    :resource/type          \"Equipment\"\r\n    :resource/properties    [:resource-property/light]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value \"3\"\r\n    :resource/power-title   \"Power\"\r\n    :resource/power-value   \"1\"\r\n    :resource/flavor-text   \"Standard leather armor used in battle.\"}\r\n\r\n   {:title                  \"Virtue: Bravery\"\r\n    :entity-type            \"resource\"\r\n    :resource/type          \"Trait\"\r\n    :resource/properties    []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value \"1\"\r\n    :resource/power-title   \"Power\"\r\n    :resource/power-value   \"3\"\r\n    :resource/flavor-text   \"You are not only capable of overcoming your fears to take action, but you thrive in that high pressure situation.\"}\r\n\r\n   {:title                  \"Training: Soldier\"\r\n    :entity-type            \"resource\"\r\n    :resource/type          \"Expertise\"\r\n    :resource/properties    []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value \"2\"\r\n    :resource/power-title   \"Power\"\r\n    :resource/power-value   \"2\"\r\n    :resource/flavor-text   \"You have experience serving as a soldier in the King's military\"}\r\n\r\n   {:title                  \"Membership: Mercenary's Guild\"\r\n    :entity-type            \"resource\"\r\n    :resource/type          \"Affiliation\"\r\n    :resource/properties    []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value \"1\"\r\n    :resource/power-title   \"Power\"\r\n    :resource/power-value   \"1\"\r\n    :resource/flavor-text   \"Membership in the Mercenary's Guild can gain you access to quests, equipment, training, assistance, etc.\"}\r\n   {:entity-type \"resource\"\r\n    :resource/quality-title \"Quality\"\r\n    :resource/properties []\r\n    :resource/power-title \"Power\"\r\n    :resource/flavor-text \"\"\r\n    :title \"Dagger\"\r\n    :resource/power-value 0\r\n    :resource/type \"Equipment\"\r\n    :resource/quality-value 3}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Shortsword\", :resource/power-value 1, :resource/type \"Equipment\" :resource/quality-value 2}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Greatsword\", :resource/power-value 3, :resource/type \"Equipment\" :resource/quality-value 0}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Handaxe\", :resource/power-value 1, :resource/type \"Equipment\" :resource/quality-value 2}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Battle Axe\", :resource/power-value 2, :resource/type \"Equipment\" :resource/quality-value 1}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Greataxe\", :resource/power-value 3, :resource/type \"Equipment\" :resource/quality-value 0}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Javelin\", :resource/power-value 1, :resource/type \"Equipment\" :resource/quality-value 2}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Spear\", :resource/power-value 2, :resource/type \"Equipment\" :resource/quality-value 1}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Lance\", :resource/power-value 3, :resource/type \"Equipment\" :resource/quality-value 0}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Hand Crossbow\", :resource/power-value 0, :resource/type \"Equipment\" :resource/quality-value 3}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Crossbow\", :resource/power-value 2, :resource/type \"Equipment\" :resource/quality-value 1}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Short Bow\", :resource/power-value 0, :resource/type \"Equipment\" :resource/quality-value 3}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Longbow\", :resource/power-value 1, :resource/type \"Equipment\" :resource/quality-value 2}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Great Bow\", :resource/power-value 2, :resource/type \"Equipment\" :resource/quality-value 1}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Tower Shield\", :resource/power-value 3, :resource/type \"Equipment\" :resource/quality-value 1}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Kite Shield\", :resource/power-value 2, :resource/type \"Equipment\" :resource/quality-value 2}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Buckler\", :resource/power-value 1, :resource/type \"Equipment\" :resource/quality-value 3}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Plate Armor\", :resource/power-value 4, :resource/type \"Equipment\" :resource/quality-value -1}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Chain Maille\", :resource/power-value 3, :resource/type \"Equipment\" :resource/quality-value 0}\r\n   {:entity-type \"resource\" :resource/quality-title \"Quality\" :resource/properties [], :resource/power-title \"Power\" :resource/flavor-text \"\" :title \"Leather Armor\", :resource/power-value 2, :resource/type \"Equipment\" :resource/quality-value 1}\r\n   {:title \"Climber's Kit\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Equipment\"\r\n    :resource/properties []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 1\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 2\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Climber's Kit\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Equipment\"\r\n    :resource/properties []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 1\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 2\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Thieves' Kit\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Equipment\"\r\n    :resource/properties []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 2\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 1\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Mediker's Kit\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Equipment\"\r\n    :resource/properties []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 1\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 2\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Rites and Runes of the Eldari\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Equipment\"\r\n    :resource/properties []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 1\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 1\r\n    :resource/flavor-text \"\"}\r\n\r\n   {:title \"Bravery\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Trait\"\r\n    :resource/properties [:resource-property/virtue]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Life\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Trait\"\r\n    :resource/properties [:resource-property/ideal]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Knowledge\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Trait\"\r\n    :resource/properties [:resource-property/virtue]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Protective\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Trait\"\r\n    :resource/properties [:resource-property/virtue]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Greedy\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Trait\"\r\n    :resource/properties [:resource-property/vice]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Alcoholic\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Trait\"\r\n    :resource/properties [:resource-property/vice]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Selfish\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Trait\"\r\n    :resource/properties [:resource-property/vice]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Spread the Faith\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Trait\"\r\n    :resource/properties [:resource-property/goal]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Uncover Forgotten Magics\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Trait\"\r\n    :resource/properties [:resource-property/goal]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n\r\n   {:title \"Scout\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Expertise\"\r\n    :resource/properties [:resource-property/training]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Soldier\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Expertise\"\r\n    :resource/properties [:resource-property/training]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Sentinel\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Expertise\"\r\n    :resource/properties [:resource-property/training]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Aethrology\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Expertise\"\r\n    :resource/properties [:resource-property/knowledge]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Medicine\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Expertise\"\r\n    :resource/properties [:resource-property/knowledge]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"History\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Expertise\"\r\n    :resource/properties [:resource-property/knowledge]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Light Fingers\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Expertise\"\r\n    :resource/properties [:resource-property/talent]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Light Footed\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Expertise\"\r\n    :resource/properties [:resource-property/talent]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n\r\n   {:title \"Adventurer\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Affiliation\"\r\n    :resource/properties [:resource-property/reputation]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Paladin of Heilm\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Affiliation\"\r\n    :resource/properties [:resource-property/membership]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Mediker's Guild\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Affiliation\"\r\n    :resource/properties [:resource-property/membership]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Arcanist's Guild\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Affiliation\"\r\n    :resource/properties [:resource-property/membership]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Thieves' Guild\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Affiliation\"\r\n    :resource/properties [:resource-property/membership]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Mentor\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Affiliation\"\r\n    :resource/properties [:resource-property/friend]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Friend\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Affiliation\"\r\n    :resource/properties [:resource-property/friend]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Enemy\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Affiliation\"\r\n    :resource/properties [:resource-property/rival]\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}\r\n\r\n   {:title \"Healing Potion\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Item\"\r\n    :resource/properties []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 1\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Poison\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Item\"\r\n    :resource/properties []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 1\r\n    :resource/flavor-text \"\"}\r\n   {:title \"Gold\"\r\n    :entity-type \"resource\"\r\n    :resource/type \"Item\"\r\n    :resource/properties []\r\n    :resource/quality-title \"Quality\"\r\n    :resource/quality-value 0\r\n    :resource/power-title \"Power\"\r\n    :resource/power-value 0\r\n    :resource/flavor-text \"\"}])\r\n\r\n(defn get-all-resources [conn]\r\n  (let [resource-ids (map first (ds/q '[:find ?eid\r\n                                       :where [?eid :entity-type \"resource\"]]\r\n                                     @conn))]\r\n    (ds/pull-many @conn '[*] resource-ids)))\r\n\r\n(defn get-all-resource-properties\r\n  [conn]\r\n  (ds/pull-many @conn '[*]\r\n                (map first (ds/q '[:find ?eid\r\n                                   :where [?eid :entity-type \"resource-property\"]]\r\n                                 @conn))))\r\n\r\n(defn get-resources-by-id\r\n  [conn resource-ids]\r\n  (ds/pull-many @conn '[*] resource-ids))\r\n\r\n(defn get-resource-by-id\r\n  [conn resource-id]\r\n  (ds/pull @conn '[*] resource-id))\r\n\r\n(defn get-resource-actions\r\n  [conn resource-id]\r\n  (println @conn)\r\n  (let [result (ds/pull-many @conn '[*]\r\n                             (map first (ds/q '[:find ?eid\r\n                                                :in $ ?id\r\n                                                :where [?id :resource/actions ?eid]]\r\n                                              @conn resource-id)))]\r\n    result))\r\n\r\n(defn create-resource\r\n  [conn resource-data]\r\n  (ds/transact! conn resource-data))\r\n\r\n(defn fffirst\r\n  [x]\r\n  (-> x first first first))\r\n\r\n(defn get-creature-resource\r\n  [conn creature-resource-id]\r\n  (ds/entity @conn creature-resource-id))\r\n\r\n(defn get-creature-resource-quantity\r\n  [conn resource-id creature-id]\r\n  (ffirst (ds/q '[:find ?qty\r\n                  :in $ ?resource-id ?creature-id\r\n                  :where [?creature-id :creature/creature-resource ?eid]\r\n                  [?eid :creature-resource/resource ?resource-id]\r\n                  [?eid :creature-resource/quantity ?qty]]\r\n                conn resource-id creature-id)))\r\n\r\n(defn get-resource-from-creature-resource\r\n  [conn creature-resource-id]\r\n  (:creature-resource/resource (ds/pull @conn '[:creature-resource/resource] creature-resource-id)))\r\n\r\n(defn get-quantity-from-creature-resource\r\n  [conn creature-resource-id]\r\n  (:creature-resource/quantity (ds/pull @conn '[:creature-resource/quantity] creature-resource-id)))\r\n\r\n(defn update-creature-resource-quantity\r\n  [conn creature-resource-id update-fn]\r\n  (let [current-quantity (ffirst (ds/q '[:find ?quantity\r\n                                 :in $ ?creature-resource-id\r\n                                 :where [?creature-resource-id :creature-resource/quantity ?quantity]]\r\n                               @conn creature-resource-id))\r\n        new-quantity (if (nil? current-quantity)\r\n                       (update-fn 0)\r\n                       (update-fn current-quantity))]\r\n    (ds/transact! conn [{:db/id creature-resource-id\r\n                         :creature-resource/quantity new-quantity}])))\r\n\r\n(defn add-creature-resource\r\n  [conn creature-id resource-id]\r\n  (let [creature-resource-id (inc (:max-eid @conn))]\r\n    (ds/transact! conn [{:db/id creature-resource-id\r\n                       :entity-type \"creature-resource\"\r\n                       :creature-resource/resource resource-id\r\n                       :creature-resource/quantity 1}\r\n                      {:db/id creature-id\r\n                       :creature/resources [creature-resource-id]}])))\r\n"]}