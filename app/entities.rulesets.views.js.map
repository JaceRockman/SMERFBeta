{"version":3,"sources":["entities/rulesets/views.cljs"],"mappings":"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","names":["entities.rulesets.views/screen-width","js/screen","entities.rulesets.views/ruleset-select","conn","rulesets","flex-vals","G__39445","G__39446","organisms.library/search-filter-sort-list","ruleset-data","js/shadow.js.shim.module$react_native.Pressable","G__39452","G__39453","entities.rulesets.data.interface/set-active-ruleset","G__39456","G__39457","organisms.library/default-text","cljs.core.nth","G__39460","G__39461","p1__39462#","entities.rulesets.views/ruleset-details","js/shadow.js.shim.module$react_native.View","G__39467","G__39468","organisms.library/scroll-position-indicator","organisms.library/ruleset-horizontal-position","js/shadow.js.shim.module$react_native.ScrollView","cljs.core/reset!","cljs.math/round","cljs.core.get_in","cljs.core.js__GT_clj","cljs.core.doall","cljs.core.map","data-keys","section-title","G__39476","G__39477","G__39478","G__39479","organisms.library/default-markdown","cljs.core.apply","cljs.core/str","cljs.core.interpose","cljs.core/vals","cljs.core/select-keys","entities.rulesets.views/rules-home","active-campaign-data","entities.campaigns.data.interface/get-active-campaign","active-ruleset-data","entities.rulesets.data.interface/get-active-ruleset","entities.campaigns.data.interface/get-active-campaign-rulesets","entities.rulesets.data.interface/get-all-rulesets","entities.rulesets.views/rules","props","organisms.library/view-frame"],"sourcesContent":["(ns entities.rulesets.views\r\n  (:require [clojure.math :as math]\r\n            [reagent.core :as r]\r\n            [\"react-native\" :as rn]\r\n            [entities.rulesets.data.interface :as ruleset-data]\r\n            [entities.campaigns.data.interface :as campaign-data]\r\n            [organisms.config :as config]\r\n            [organisms.library :as components]))\r\n\r\n(defn screen-width [] (.-width js/screen))\r\n\r\n(defn ruleset-select\r\n  [conn rulesets]\r\n  (let [flex-vals [1 1]]\r\n    (components/search-filter-sort-list\r\n     {:items rulesets\r\n      :column-headers [\"Title\" \"Complexity\"]\r\n      :column-flex-vals flex-vals\r\n      :item-format-fn (fn [ruleset-data]\r\n                        [:> rn/Pressable {:style {:flex-direction :row}\r\n                                          :on-press (fn []\r\n                                                      (ruleset-data/set-active-ruleset\r\n                                                       conn\r\n                                                       (:id ruleset-data)))}\r\n                         (components/default-text (:title ruleset-data) {:flex (nth flex-vals 0)})\r\n                         (components/default-text (:complexity ruleset-data) {:flex (nth flex-vals 1)})])}\r\n     \"rulesets\")))\r\n\r\n(defn ruleset-details [conn ruleset-data]\r\n  [:> rn/View\r\n   {:style {:width  \"100%\"\r\n            :height \"100%\"}}\r\n   (components/scroll-position-indicator\r\n    components/ruleset-horizontal-position\r\n    [\"Skill Checks\" \"Encounters\" \"Damage\" \"Conditions\" \"Stats\"])\r\n   [:> rn/ScrollView {:on-scroll                       #(reset! components/ruleset-horizontal-position (math/round (/ (get-in (js->clj %) [\"nativeEvent\" \"contentOffset\" \"x\"]) 412)))\r\n                      :scrollEventThrottle             32\r\n                      :paging-enabled                  true\r\n                      :horizontal                      true\r\n                      :showsHorizontalScrollIndicator  false\r\n                      :shows-vertical-scroll-indicator false}\r\n    (doall\r\n     (map (fn [data-keys section-title]\r\n            [:> rn/ScrollView {:key (str section-title \"-page\")\r\n                               :style {:width  (screen-width)\r\n                                       :height :auto}}\r\n             (components/default-text section-title {:font-size 24})\r\n             (components/default-markdown conn\r\n                                          (apply str (interpose \"\\n\" (vals (select-keys ruleset-data data-keys)))))])\r\n          [[:ruleset/skill-check-overview\r\n            :ruleset/skill-check-base-dice-pool\r\n            :ruleset/skill-check-benefits-and-detriments\r\n            :ruleset/complex-actions\r\n            :ruleset/careful-and-reckless-actions\r\n            :ruleset/skill-check-passive-checks]\r\n           [:ruleset/encounter-overview\r\n            :ruleset/encounter-actions\r\n            :ruleset/encounter-moments\r\n            :ruleset/encounter-rounds]\r\n           [:ruleset/damage-overview\r\n            :ruleset/damage-injuries\r\n            :ruleset/damage-conditions\r\n            :ruleset/damage-recover]\r\n           [:ruleset/conditions-wounded\r\n            :ruleset/conditions-incapacitated\r\n            :ruleset/conditions-dead\r\n            :ruleset/conditions-exhausted\r\n            :ruleset/conditions-surprised\r\n            :ruleset/conditions-blinded\r\n            :ruleset/conditions-deafened\r\n            :ruleset/conditions-constrained\r\n            :ruleset/conditions-frightened]\r\n           [:ruleset/stats-physical\r\n            :ruleset/stats-spiritual\r\n            :ruleset/stats-mental\r\n            :ruleset/stats-social]]\r\n          [\"Skill Checks\" \"Encounters\" \"Damage\" \"Conditions\" \"Stats\"]))]])\r\n\r\n(defn rules-home\r\n  [conn]\r\n  (let [active-campaign-data (campaign-data/get-active-campaign conn)\r\n        active-ruleset-data (ruleset-data/get-active-ruleset conn)]\r\n    (cond\r\n      active-ruleset-data (ruleset-details conn active-ruleset-data)\r\n      active-campaign-data (ruleset-select conn (campaign-data/get-active-campaign-rulesets conn))\r\n      :else (ruleset-select conn (ruleset-data/get-all-rulesets conn)))))\r\n\r\n(defn rules [conn ^js props]\r\n  (components/view-frame conn (rules-home conn) \"rules-page\"))\r\n"]}